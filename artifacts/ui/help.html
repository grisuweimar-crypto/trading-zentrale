<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Scanner_vNext â€” Hilfe & Projektbeschreibung</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#0f172a;
      --border:rgba(148,163,184,.15);
      --muted:#94a3b8;
      --text:#e2e8f0;
      --accent:#60a5fa;
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; background: radial-gradient(1000px 600px at 10% 0%, rgba(96,165,250,.12), transparent 60%), radial-gradient(800px 500px at 90% 10%, rgba(52,211,153,.10), transparent 55%), var(--bg); color:var(--text);}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    header{padding:18px 0; border-bottom:1px solid var(--border); background: rgba(15,23,42,.72); backdrop-filter: blur(10px); position: sticky; top:0; z-index: 10;}
    .wrap{max-width: 980px; margin: 0 auto; padding: 0 18px;}
    .top{display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap;}
    h1{margin:0; font-size:18px;}
    .meta{color:var(--muted); font-family: var(--mono); font-size:12px;}
    .pill{display:inline-block; border:1px solid var(--border); border-radius:999px; padding:4px 10px; font-size:12px; background: rgba(148,163,184,.06);}
    .card{background: rgba(15,23,42,.78); border:1px solid var(--border); border-radius: 16px; padding: 14px; margin: 14px 0;}
    h2{margin: 0 0 8px 0; font-size: 16px;}
    h3{margin: 14px 0 6px 0; font-size: 14px;}
    p{margin: 8px 0; line-height: 1.55; color: rgba(226,232,240,.95);}
    ul{margin: 8px 0 8px 18px; color: rgba(226,232,240,.95);}
    code, pre{font-family: var(--mono);}
    pre{background: rgba(2,6,23,.65); border:1px solid rgba(148,163,184,.15); padding:10px; border-radius: 12px; overflow:auto;}
    .toc a{display:block; padding:4px 0;}
    .callout{border-left: 4px solid var(--accent); padding: 8px 10px; background: rgba(96,165,250,.08); border-radius: 10px;}
    .grid2{display:grid; grid-template-columns: 1fr; gap:12px;}
    @media(min-width:860px){ .grid2{grid-template-columns: 1fr 1fr;} }
    .tag{font-family: var(--mono); font-size: 12px; color: var(--muted);}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="top">
        <div>
          <h1>Scanner_vNext â€” Hilfe & Projektbeschreibung</h1>
          <div class="meta">version 0.0.1-v7 Â· build 2026-02-13 Â· <a href="index.html">zurÃ¼ck zum Dashboard</a></div>
        </div>
        <div class="pill">Living Doc Â· wird laufend erweitert</div>
      </div>
    </div>
  </header>

  <main class="wrap">

    <div class="card" style="border-color: rgba(251,191,36,.35); background: rgba(251,191,36,.06);">
      <h2>Disclaimer</h2>
      <p><b>Privates, experimentelles Projekt.</b> Keine Anlageberatung, keine Empfehlung, keine GewÃ¤hr. Inhalte kÃ¶nnen unvollstÃ¤ndig, falsch oder veraltet sein. Nutzung ausschlieÃŸlich auf eigene Verantwortung.</p>
    </div>

    <div class="card">
      <h2 id="toc">Inhalt</h2>
      <div class="toc">
        <a href="#ueberblick">1) Ãœberblick</a>
        <a href="#pipeline">2) Datenfluss (Pipeline)</a>
        <a href="#scoring">3) Scoring: Score, Opportunity, Risk, Regime, Confidence</a>
        <a href="#recommendation">4) Empfehlungscode (R0â€“R5)</a>
        <a href="#dashboard">5) Dashboard-Funktionen</a>
        <a href="#portfolio">6) Portfolio (geplant)</a>
        <a href="#briefing">7) Briefing / KI</a>
        <a href="#autopilot">8) GitHub Autopilot</a>
        <a href="#notifications">9) Benachrichtigungen (Telegram)</a>
        <a href="#troubleshooting">10) Troubleshooting</a>
        <a href="#roadmap">11) Roadmap & Konzept</a>
      </div>
    </div>

    <div class="card" id="ueberblick">
      <h2>1) Ãœberblick</h2>
      <p><b>Scanner_vNext</b> ist ein privates Tradingâ€‘Researchâ€‘System fÃ¼r Watchlists und Portfolioâ€‘Ideen. Es bÃ¼ndelt Kennzahlen, Signale und Marktâ€‘Kontext zu einem <b>multiâ€‘faktoriellen Score</b> â€“ mit dem Ziel, Entscheidungen schneller, konsistenter und nachvollziehbar zu machen.</p>
      <div class="callout">
        <p style="margin:0"><b>Wichtig:</b> Presets sind reine <i>Ansichten</i> (Viewâ€‘Layer) â€“ sie verÃ¤ndern das Scoring nicht. KIâ€‘Texte sind reine <i>Briefings</i> und dÃ¼rfen keinen Einfluss auf den Score haben.</p>
      </div>
      <p class="tag">Hinweis: Dieses Projekt ist kein Finanzrat. Es ist ein Werkzeug zur eigenen Strukturierung und Dokumentation von Entscheidungen.</p>
    </div>

    <div class="card" id="pipeline">
      <h2>2) Datenfluss (Pipeline)</h2>
      <p>Die tÃ¤glichen Schritte sind bewusst getrennt â€“ damit Scoring, Daten und UI sauber entkoppelt bleiben.</p>
      <pre>python -m scanner.app.run_daily
python -m scanner.ui.generator</pre>
      <ul>
        <li><code>run_daily</code> erzeugt/aktualisiert CSVs in <code>artifacts/watchlist/</code> und (optional) Reports in <code>artifacts/reports/</code>.</li>
        <li><code>ui.generator</code> liest eine CSV (z.B. <code>watchlist_CORE.csv</code>) und schreibt statisches HTML nach <code>artifacts/ui/</code>.</li>
      </ul>
      <p>Damit kannst du die Pipeline testen, versionieren und reproduzierbar ausfÃ¼hren â€“ ohne dass das UI â€žheimlichâ€œ irgendwas berechnet, was die Ergebnisse verÃ¤ndern wÃ¼rde.</p>
    </div>

    <div class="card" id="scoring">
      <h2>3) Scoring (Score, Opportunity, Risk, Regime, Confidence)</h2>
      <p>Das Scoring lÃ¤uft zentral im Domainâ€‘Layer (<code>scanner.domain.scoring_engine</code>). Dort wird aus einer Watchlistâ€‘Zeile ein Satz aus <b>Opportunityâ€‘Faktoren</b> und <b>Riskâ€‘Faktoren</b> gebildet und anschlieÃŸend zu einem finalen Score zusammengefÃ¼hrt.</p>

      <div class="grid2">
        <div>
          <h3>Opportunity (0..1, hÃ¶her = besser)</h3>
          <p>Beispiele der aktuell verwendeten Faktoren (wenn in den CSVs vorhanden):</p>
          <ul>
            <li><b>Growth %</b>, <b>ROE %</b>, <b>Margin %</b></li>
            <li><b>MCâ€‘Chance</b> (Monteâ€‘Carloâ€‘Chance)</li>
            <li><b>Trend200</b> (200â€‘Tageâ€‘Trend) und <b>RS3M</b> (relative StÃ¤rke 3M)</li>
            <li><b>Elliottâ€‘Quality</b> (abhÃ¤ngig vom Elliottâ€‘Signal)</li>
            <li><b>Upside</b> (nur wenn Elliottâ€‘Signal BUY und Target/Preis vorhanden; 30% Upside = â€žvollerâ€œ Faktor)</li>
          </ul>
          <p class="tag">Hinweis: einzelne Faktoren sind bewusst als Platzhalter gesetzt (z.B. Analystâ€‘Faktor), bis Spalten dafÃ¼r existieren.</p>
        </div>
        <div>
          <h3>Risk (0..1, hÃ¶her = riskanter)</h3>
          <p>Beispiele der aktuell verwendeten Faktoren:</p>
          <ul>
            <li><b>Debt/Equity</b></li>
            <li><b>CRVâ€‘Fragility</b> (CRV wird in eine â€žFragilitÃ¤tâ€œ umgerechnet; bei fehlendem CRV neutral)</li>
            <li><b>Volatility</b>, <b>DownsideDev</b>, <b>MaxDrawdown</b></li>
            <li><b>Liquidityâ€‘Risk</b> (bevorzugt DollarVolume; Fallback AvgVolume)</li>
          </ul>
          <p class="tag">Die Idee: Opportunity alleine reicht nicht â€“ ein hoher Score soll bei fragiler LiquiditÃ¤t oder extremem Drawdown nicht â€žblindâ€œ nach oben schieÃŸen.</p>
        </div>
      </div>

      <h3>Normalisierung (Universeâ€‘Scaling)</h3>
      <p>Viele Rohwerte werden Ã¼ber ein Universe (Verteilung der Werte im aktuellen Datensatz) auf 0..1 skaliert. Dadurch wird der Score <b>relativ zum aktuellen Marktâ€‘Universum</b> interpretierbar (statt absolute Schwellen zu erzwingen).</p>

      <h3>Regime (Marktâ€‘Kontext)</h3>
      <p>Der Score kann je nach Marktregime anders gewichtet werden. DafÃ¼r werden vorhandene Spalten genutzt (z.B. <code>MarketRegimeStock</code>/<code>MarketRegimeCrypto</code> und Trend200â€‘Kontext). Wenn das Regimeâ€‘Label fehlt, wird es aus Trend200 grob als bull/neutral/bear abgeleitet.</p>
      <ul>
        <li><b>opp_w</b> / <b>risk_w</b>: wie stark Opportunity vs. Risk in den finalen Score einflieÃŸt</li>
        <li><b>risk_mult</b>: wie â€žhartâ€œ Risiko bestraft wird</li>
      </ul>

      <h3>Confidence (0..100)</h3>
      <p>ZusÃ¤tzlich wird eine <b>Confidence</b> berechnet, die z.B. Datenabdeckung, Konfluenz, Risikoâ€‘Sauberkeit, Regimeâ€‘Ausrichtung und LiquiditÃ¤t berÃ¼cksichtigt. Ziel: du erkennst schneller, ob ein hoher Score auf stabilen Inputs steht â€“ oder auf dÃ¼nnem Datenâ€‘Eis.</p>
    </div>

    <div class="card" id="recommendation">
      <h2>4) Empfehlungscode (R0â€“R5)</h2>
      <p>Im Dashboard erscheint im Scoreâ€‘Bereich ein privater Code <b>R0â€“R5</b>. Das ist <b>kein Tradingâ€‘Signal</b>, sondern eine knappe Zusammenfassung fÃ¼r deinen Workflow.</p>
      <ul>
        <li><b>R0</b>: <span class="sig warn grad">Avoid</span> (score_status beginnt mit <code>AVOID_</code>)</li>
        <li><b>R5</b>: <span class="sig good grad">Top Setup</span> (Score-Perzentil >= 90 <i>und</i> Trend OK <i>und</i> Liquidity OK)</li>
        <li><b>R4</b>: <span class="sig good grad">Good Setup</span> (Score-Perzentil >= 75 <i>und</i> Liquidity OK)</li>
        <li><b>R3</b>: <span class="sig blue grad">Neutral</span> (Score-Perzentil >= 45)</li>
        <li><b>R2</b>: <span class="sig warn grad">Weak</span> (Score-Perzentil >= 20)</li>
        <li><b>R1</b>: <span class="sig bad grad">Low Priority</span> (Rest)</li>
      </ul>
      <p class="tag">Technik: das UI berechnet das Scoreâ€‘Perzentil aus allen Zeilen der geladenen Tabelle.</p>
    </div>

    <div class="card" id="dashboard">
      <h2>5) Dashboardâ€‘Funktionen</h2>
      <h3>Presets</h3>
      <p>Presets sind Filter/Sichten (CORE, TOP, AVOID â€¦). Sie bestimmen, <i>was du siehst</i>, nicht <i>wie gescored wird</i>.</p>

      <h3>Suche</h3>
      <p>Suche filtert quer Ã¼ber Symbol/Name/Kategorie/Land (und weitere Felder, sofern vorhanden).</p>

      <h3>Quickâ€‘Filter & KPIâ€‘Chips</h3>
      <p>Quickâ€‘Filter sind schnelle boolesche/Statusâ€‘Schalter (z.B. â€žNur OKâ€œ, â€žTrend OKâ€œ, â€žLiq OKâ€œ). KPIâ€‘Chips sind klickbare Zusammenfassungen, die ebenfalls als Filter wirken.</p>

      <h3>Cluster (offiziell) vs. SÃ¤ulen (privat)</h3>
      <p>Es gibt zwei unterschiedliche â€žKategorienâ€œ im UI â€“ mit unterschiedlicher Bedeutung:</p>
      <ul>
        <li><b>Cluster/Sektor (offiziell)</b>: kommt aus Yahooâ€‘Taxonomie (Sector/Industry) und ist dafÃ¼r gedacht, echte Marktâ€‘Cluster sichtbar zu machen.</li>
        <li><b>SÃ¤ulen (5â€‘SÃ¤ulen/Playground, privat)</b>: deine thematische Metadatenâ€‘Zuordnung (Gehirn, Hardware, Energie, Fundament, Recycling, Playground). Sie dient nur der Navigation/Explainability und <b>Ã¤ndert niemals</b> den Score.</li>
      </ul>
      <p class="tag">Hinweis: Ã¤ltere â€žPhantasieâ€‘Sektorenâ€œ kÃ¶nnen weiterhin in der Quelle vorkommen, werden aber nicht als offizieller Sektor interpretiert. Die UI kann daraus optional eine SÃ¤ule ableiten, damit das Konzept sichtbar bleibt.</p>

      <h3>Bucketâ€‘Matrix (Score Ã— Risk)</h3>
      <p>Die Matrix verdichtet das Universum: <b>Score</b> auf der Xâ€‘Achse, <b>Risk</b> auf der Yâ€‘Achse. Klick auf ein Feld aktiviert einen zusÃ¤tzlichen Matrixâ€‘Filter.</p>

      <h3>Whyâ€‘Score Drawer</h3>
      <p>Der Drawer erklÃ¤rt, <i>warum</i> ein Wert so aussieht: Statusâ€‘Flags, wichtige Kennzahlen und â€“ falls vorhanden â€“ ein Breakdown (z.B. Confidenceâ€‘Breakdown).</p>

      <h3>Tickerâ€‘Zelle (2â€‘zeilig)</h3>
      <p>Aktien: oben Symbol, unten ISIN. Krypto: oben Pair/ID, unten Yahooâ€‘Pair (oder was vorhanden ist). Ziel: du siehst IdentitÃ¤t + â€žKeyâ€œ sofort, ohne zusÃ¤tzliche Spalten.</p>

      <h3>Finvizâ€‘Inspiration (eigene Umsetzung)</h3>
      <p>Die Marketâ€‘Ãœbersicht (Indexâ€‘Charts, Breadth, Heatmap, Movers/News) ist als eigene Seite geplant/teilweise vorhanden (<a href="../dashboard/index.html" target="_blank" rel="noopener">Marketâ€‘Dashboard</a>). Layoutâ€‘Ideen dÃ¼rfen inspiriert sein, aber Inhalte/Code werden nicht 1:1 kopiert â€“ Scanner_vNext bleibt eine eigenstÃ¤ndige Logik/UX.</p>
    </div>

    <div class="card" id="portfolio">
      <h2>6) Portfolio (geplant)</h2>
      <p>Hier kommt eine Portfolioâ€‘Sektion hin (BestÃ¤nde, Einstand, Gewichtung, Risikoâ€‘Beitrag, Zielâ€‘Allokation, Alerts). Aktuell ist das bewusst noch Platzhalter, damit wir es sauber an dein Konzept andocken kÃ¶nnen.</p>
      <div class="callout"><p style="margin:0"><b>TODO:</b> Portfolioâ€‘Konzept einfÃ¼gen, sobald du es wieder parat hast (oder als Datei/Notiz lieferst).</p></div>
    </div>

    <div class="card" id="briefing">
      <h2>7) Briefing / KI</h2>
      <p>Das Briefing ist ein <b>passiver Explainabilityâ€‘Report</b> fÃ¼r die Topâ€‘Werte. Es wird ausschlieÃŸlich aus bereits vorhandenen Feldern der Watchlistâ€‘CSV abgeleitet (kein Reâ€‘Scoring).</p>
      <h3>Outputs</h3>
      <ul>
        <li><code>artifacts/reports/briefing.json</code> â€“ strukturierte Daten (Topâ€‘N + GrÃ¼nde/Risiken/Checks).</li>
        <li><code>artifacts/reports/briefing.txt</code> â€“ deterministische Textâ€‘Version (immer vorhanden, offline).</li>
        <li><code>artifacts/reports/briefing_ai.txt</code> â€“ optionale sprachliche GlÃ¤ttung via OpenAI API (Featureâ€‘Flag, default OFF).</li>
      </ul>
      <h3>Erzeugung</h3>
      <p>Briefing generieren (Stage A, deterministisch):</p>
      <pre><code>python scripts/generate_briefing.py</code></pre>
      <p>AIâ€‘Enhancement (Stage B, optional):</p>
      <pre><code>set OPENAI_API_KEY=...  # Windows
python scripts/generate_briefing.py --enable-ai</code></pre>
      <ul>
        <li>Es ist <b>rein erklÃ¤rend</b> (Notizen/Explainability).</li>
        <li>Es darf <b>niemals</b> das Scoring oder Ranking beeinflussen.</li>
        <li><b>Keine Anlageberatung</b>: das Briefing enthÃ¤lt einen kurzen Disclaimer.</li>
      </ul>
      <p class="tag">Dashboard: Das UI zeigt bevorzugt <code>briefing_ai.txt</code>, sonst <code>briefing.txt</code>. Wenn nichts vorhanden ist: â€žNoch kein Briefing generiertâ€œ.</p>
    </div>



    <div class="card" id="autopilot">
      <h2>8) GitHub Autopilot (ohne laufenden PC)</h2>
      <p>Wenn Scanner_vNext in einem GitHubâ€‘Repo liegt, kann ein geplanter Workflow (GitHub Actions) die Pipeline automatisch ausfÃ¼hren. Damit lÃ¤uft der Scanner â€žserverlosâ€œ in der Cloud â€“ dein Rechner muss dafÃ¼r nicht an sein.</p>
      <h3>Was macht der Autopilot?</h3>
      <ul>
        <li>Installiert das Projekt (<code>pip install -e .</code>).</li>
        <li>FÃ¼hrt <code>python -m scanner.app.run_daily</code> aus (CSVâ€‘Outputs nach <code>artifacts/watchlist/</code>).</li>
        <li>Erzeugt das deterministische Briefing (<code>scripts/generate_briefing.py</code> â†’ <code>artifacts/reports/</code>).</li>
        <li>Generiert die UI (<code>python -m scanner.ui.generator</code> â†’ <code>artifacts/ui/</code>).</li>
        <li>Committet die Outputs (standardmÃ¤ÃŸig <code>artifacts/</code>) zurÃ¼ck ins Repo.</li>
      </ul>
      <h3>Warum committen wir <code>artifacts/</code>?</h3>
      <p>FÃ¼r den Einstieg ist das der simpelste Weg: du siehst im Repo und/oder Ã¼ber GitHub Pages sofort die aktuellen HTML/CSVâ€‘Outputs. SpÃ¤ter kann man das auf einen reinen Deployâ€‘Branch umstellen, wenn das Repo zu groÃŸ wird.</p>
      <h3>Benachrichtigungen</h3>
      <p>GitHub kann dir Eâ€‘Mails senden, wenn ein Workflow gelaufen ist. Das kommt von GitHub (nicht vom Projekt). Wenn du das reduzieren willst: Repo â†’ <i>Watch</i> Einstellungen bzw. GitHub Notifications anpassen.</p>
      <p class="tag">Technik: Workflowâ€‘Datei liegt unter <code>.github/workflows/run_scanner.yml</code>.</p>
    </div>

    <div class="card" id="notifications">
      <h2>9) Benachrichtigungen (Telegram)</h2>
      <p>Telegram ist optional und standardmÃ¤ÃŸig deaktiviert. Es hat keinen Einfluss auf Scoring oder Ranking â€“ es ist nur ein zusÃ¤tzlicher Kanal fÃ¼r Hinweise. Da du es aktuell nicht brauchst, bleibt es aus.</p>
      <h3>Aktivieren (falls du es spÃ¤ter wieder willst)</h3>
      <pre><code>TELEGRAM_ENABLED=1
TELEGRAM_BOT_TOKEN=...   # oder TELEGRAM_TOKEN (Legacy)
TELEGRAM_CHAT_ID=...</code></pre>
      <p class="tag">Hinweis: Ohne <code>TELEGRAM_ENABLED</code> (oder bei fehlenden Tokens) wird nichts gesendet.</p>
    </div>

    <div class="card" id="troubleshooting">
      <h2>10) Troubleshooting</h2>
      <h3>UI zeigt â€žKeine Datenâ€œ</h3>
      <ul>
        <li>PrÃ¼fe, ob <code>artifacts/watchlist/watchlist_CORE.csv</code> (oder ALL) existiert.</li>
        <li>FÃ¼hre zuerst <code>python -m scanner.app.run_daily</code> aus.</li>
      </ul>
      <h3>Contract validation failed</h3>
      <ul>
        <li>Contract: <code>configs/watchlist_contract.json</code></li>
        <li>Die UI bricht absichtlich ab, wenn Pflichtspalten fehlen â€“ das verhindert stilles â€žUI zeigt Mistâ€œ.</li>
        <li>LÃ¶sung: Watchlistâ€‘CSV neu generieren oder Migration/Normalizeâ€‘Scripts nutzen.</li>
      </ul>
      <h3>Briefing fehlt</h3>
      <ul>
        <li>Erzeuge es mit <code>python scripts/generate_briefing.py</code>.</li>
        <li>UI lÃ¤dt bevorzugt <code>briefing_ai.txt</code>, sonst <code>briefing.txt</code>. Wenn beide fehlen: â€žNoch kein Briefing generiertâ€œ.</li>
      </ul>
      <h3>GOOGLE_CREDENTIALS fehlt (GitHub Action)</h3>
      <ul>
        <li>Das Secret muss in GitHub als <code>GOOGLE_CREDENTIALS</code> hinterlegt sein (JSONâ€‘Serviceâ€‘Account).</li>
        <li>Ohne Credentials kann der Scanner keine Sheetsâ€‘/Datenâ€‘Quellen lesen (je nach Setup).</li>
      </ul>
      <p class="tag">Wenn du nicht weiterkommst: Logs aus GitHub Actions oder die konkrete Fehlermeldung hier rein kopieren.</p>
    </div>
    <div class="card" id="roadmap">
      <h2>11) Roadmap & Konzept (Platzhalter)</h2>
      <ul>
        <li>Matrix Labels/Logik weiter finalisieren (Riskâ€‘Proxy).</li>
        <li>Recommendationâ€‘Logik bei Bedarf schÃ¤rfen (Regeln bleiben transparent).</li>
        <li>Watchlistâ€‘Hygiene: Spaltenmigration & Dedupeâ€‘Strategie.</li>
        <li>Portfolioâ€‘Block ergÃ¤nzen.</li>
        <li>Briefingâ€‘Logik weiter schÃ¤rfen (Texte/Mapping), AI bleibt optional und ohne Einfluss auf Score.</li>
      </ul>
      <p class="tag">Diese Seite ist absichtlich nicht â€žfertigâ€œ â€“ sie ist deine Dokumentation, die mit dem Projekt mitwÃ¤chst.</p>
    </div>

    <div class="card">
      <p style="margin:0"><a href="#toc">â†‘ zurÃ¼ck zum Anfang</a></p>
    </div>

  </main>
</body>
</html>
